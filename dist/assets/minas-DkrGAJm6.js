import{Z as x,G as E,A as T,D as M}from"./GLTFLoader-PfjI8pFD.js";/* empty css              */document.addEventListener("DOMContentLoaded",()=>{const b=document.querySelector("#start-button"),o=document.querySelector("#ar-container"),m=[{name:"Mina a Cielo Abierto",file:"minaAcieloAbierto.glb",scale:.035,description:"Método de explotación donde se extraen minerales desde un gran rajo superficial. Los bancos y rampas forman una estructura escalonada."},{name:"Mina Industrial",file:"minaIndustrial.glb",scale:.03,description:"Mina industrial subterránea que utiliza túneles y cámaras para acceder a los depósitos minerales profundos."},{name:"Mina Subterránea",file:"minaSubterranea.glb",scale:.035,description:"Mina subterránea que emplea métodos como el corte y relleno, o el hundimiento por bloques para extraer minerales."},{name:"Mina a cielo Abierto con Equipos",file:"minaacieloabierto2.glb",scale:.035,description:"Mina a cielo abierto vista desde otro ángulo, mostrando maquinaria pesada utilizada en la extracción."}];let n=null,s=!1,d=0,c=null,h=null;const S=async()=>{document.querySelector(".ui-overlay").style.display="none",o.style.display="block",document.querySelector("#scanning-ui").classList.remove("hidden");const u=new x({container:o,imageTargetSrc:"/AppMindAr/mind/minas-targets.mind"}),{renderer:p,scene:l,camera:q}=u,v=new E;l.add(new T(16777215,1.2));const f=new M(16776160,.9);f.position.set(2,3,2),l.add(f);const g=new M(16777215,.6);g.position.set(-2,2,-2),l.add(g),m.map((e,i)=>{const t=u.addAnchor(i);return v.load(`/AppMindAr/models/${e.file}`,a=>{const r=a.scene;r.scale.set(e.scale,e.scale,e.scale),r.position.set(0,0,0),t.group.add(r),t.modelMain=r}),t.onTargetFound=()=>{document.querySelector("#scanning-ui").classList.add("hidden"),t.group,t.modelMain&&t.modelMain.children.length>0?n=t.modelMain.children[0]:t.modelMain?n=t.modelMain:n=null,w(m[i])},t.onTargetLost=()=>{n=null,document.querySelector("#scanning-ui").classList.remove("hidden"),L()},t});const y=document.querySelector("#info-panel"),A=document.querySelector("#info-name"),D=document.querySelector("#info-description"),X=document.querySelector("#close-info-btn"),w=e=>{A.textContent=e.name,D.textContent=e.description,y.classList.remove("hidden")},L=()=>{y.classList.add("hidden")};X.addEventListener("click",L),o.addEventListener("touchstart",e=>{n&&(e.touches.length===1&&(s=!0,d=e.touches[0].clientX),e.touches.length===2&&(c=Math.hypot(e.touches[0].clientX-e.touches[1].clientX,e.touches[0].clientY-e.touches[1].clientY),h=n.scale.x))}),o.addEventListener("touchend",()=>{s=!1,c=null}),o.addEventListener("touchmove",e=>{if(e.preventDefault(),n){if(s&&e.touches.length===1){const i=e.touches[0].clientX-d;n.rotation.y+=i*.01,d=e.touches[0].clientX}if(e.touches.length===2&&c){let t=Math.hypot(e.touches[0].clientX-e.touches[1].clientX,e.touches[0].clientY-e.touches[1].clientY)/c,a=Math.max(.015,Math.min(.08,h*t));n.scale.set(a,a,a)}}},{passive:!1}),await u.start(),p.setAnimationLoop(()=>{p.render(l,q),n&&!s&&(n.rotation.y+=.005)})};b.addEventListener("click",S)});
