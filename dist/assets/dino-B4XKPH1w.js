import{Z as g,A,D as E,G as L}from"./GLTFLoader-PfjI8pFD.js";/* empty css              */let t=null,d=!1,l=null;const m=new Audio("/AppMindAr/sounds/roar.mp3");window.start=async()=>{d&&t&&await w(),t=new g({container:document.querySelector("#ar-container"),imageTargetSrc:"/AppMindAr/mind/targets.mind"});const{renderer:e,scene:s,camera:o}=t,f=new A(16777215,1);s.add(f);const h=new E(16777215,.8);h.position.set(1,1,1),s.add(h);const p=[t.addAnchor(0),t.addAnchor(1),t.addAnchor(2),t.addAnchor(3)],y=new L,c=(i,n=.1)=>new Promise((r,a)=>{y.load(i,u=>{const b=u.scene;b.scale.set(n,n,n),r(b)},void 0,u=>a(u))});try{const i=await Promise.all([c("/AppMindAr/models/brachiosaurus.glb",.1),c("/AppMindAr/models/trex.glb",.1),c("/AppMindAr/models/triceratops.glb",1),c("/AppMindAr/models/velociraptor.glb",.1)]);p.forEach((r,a)=>{r.group.add(i[a])});const n=[document.getElementById("label-brachiosaurus"),document.getElementById("label-trex"),document.getElementById("label-triceratops"),document.getElementById("label-velociraptor")];p.forEach((r,a)=>{r.onTargetFound=()=>{n[a].style.display="block",document.getElementById("restart-button").classList.add("hidden"),m.currentTime=0,m.play(),window.showDinoInfo&&window.showDinoInfo(a)},r.onTargetLost=()=>{n[a].style.display="none",document.getElementById("restart-button").classList.remove("hidden"),m.pause(),m.currentTime=0,window.hideDinoInfo&&window.hideDinoInfo()}}),await t.start(),d=!0,e.setAnimationLoop(()=>{d&&(i.forEach(r=>{r.rotation.y+=.01}),e.render(s,o))}),document.getElementById("restart-button").classList.remove("hidden"),I()}catch(i){console.error("Error cargando modelos:",i);const n=document.querySelector(".search-text");n&&(n.textContent="❌ Error cargando modelos",n.style.color="#ff6b6b")}};const w=async()=>{if(t&&d){d=!1;try{await t.stop();const e=t.video;e&&e.srcObject&&(e.srcObject.getTracks().forEach(o=>o.stop()),e.srcObject=null),t.renderer&&(t.renderer.setAnimationLoop(null),t.renderer.clear()),document.querySelectorAll(".label").forEach(o=>{o.style.display="none"}),window.hideDinoInfo&&window.hideDinoInfo()}catch(e){console.error("Error deteniendo AR:",e)}}},I=()=>{const e=document.getElementById("restart-button");l&&e.removeEventListener("click",l),l=async()=>{console.log("Reiniciando escaneo..."),e.classList.add("hidden");const s=e.textContent;e.textContent="⏳ Reiniciando...",e.disabled=!0;try{await w();const o=document.querySelector(".search-text");o&&(o.textContent="🔍 Buscando marcadores...",o.style.color="#00b894"),setTimeout(async()=>{await window.start(),e.textContent=s,e.disabled=!1},500)}catch(o){console.error("Error en reinicio:",o),e.classList.remove("hidden"),e.textContent=s,e.disabled=!1}},e.addEventListener("click",l)};
