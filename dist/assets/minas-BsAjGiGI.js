import{Z as A,G as D,A as E,D as w}from"./GLTFLoader-PfjI8pFD.js";/* empty css              */document.addEventListener("DOMContentLoaded",()=>{const f=document.querySelector("#start-button"),o=document.querySelector("#ar-container"),d=[{name:"Mina a Cielo Abierto",file:"minaAcieloAbierto.glb",scale:.05,position:[0,0,0],description:"Método de explotación donde se extraen minerales desde un gran rajo superficial. Los bancos y rampas forman una estructura escalonada."},{name:"Mina Industrial",file:"minaIndustrial.glb",scale:.04,position:[0,0,0],description:"Mina industrial subterránea que utiliza túneles y cámaras para acceder a los depósitos minerales profundos."},{name:"Mina Subterránea",file:"minaSubterranea.glb",scale:.05,position:[0,0,0],description:"Mina subterránea que emplea métodos como el corte y relleno, o el hundimiento por bloques para extraer minerales."},{name:"Mina a cielo Abierto con Equipos",file:"minaacieloabierto2.glb",scale:.05,position:[0,0,0],description:"Mina a cielo abierto vista desde otro ángulo, mostrando maquinaria pesada utilizada en la extracción."}];let t=null;const g=async()=>{document.querySelector(".ui-overlay").style.display="none",o.style.display="block",document.querySelector("#scanning-ui").classList.remove("hidden");const s=new A({container:o,imageTargetSrc:"/AppMindAr/mind/minas-targets.mind"}),{renderer:u,scene:r,camera:y}=s,b=new D;r.add(new E(16777215,.8));const m=new w(16777215,1);m.position.set(5,10,7.5),r.add(m),d.map((e,i)=>{const n=s.addAnchor(i);return b.load(`/AppMindAr/models/${e.file}`,S=>{const a=S.scene;a.scale.set(e.scale,e.scale,e.scale),a.position.set(...e.position),n.group.add(a),n.modelMain=a}),n.onTargetFound=()=>{document.querySelector("#scanning-ui").classList.add("hidden"),n.group,n.modelMain&&n.modelMain.children.length>0?t=n.modelMain.children[0]:n.modelMain?t=n.modelMain:t=null,v(d[i])},n.onTargetLost=()=>{t=null,!document.querySelector(".ui-overlay").style.display==="none"&&document.querySelector("#scanning-ui").classList.remove("hidden"),h()},n});const p=document.querySelector("#info-panel"),L=document.querySelector("#info-name"),M=document.querySelector("#info-description"),q=document.querySelector("#close-info-btn"),v=e=>{L.textContent=e.name,M.textContent=e.description,p.classList.remove("hidden")},h=()=>{p.classList.add("hidden")};q.addEventListener("click",h);let c=0,l=!1;o.addEventListener("touchstart",e=>{e.touches.length===1&&(l=!0,c=e.touches[0].clientX)}),o.addEventListener("touchend",()=>{l=!1}),o.addEventListener("touchmove",e=>{if(e.preventDefault(),l&&t&&e.touches.length===1){const i=e.touches[0].clientX-c;t.rotation.y+=i*.01,c=e.touches[0].clientX}},{passive:!1}),await s.start(),u.setAnimationLoop(()=>{u.render(r,y)})};f.addEventListener("click",g)});
